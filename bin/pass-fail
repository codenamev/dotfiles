#!/usr/bin/env bash
#
# Usage: set any of the following environment variables to get run before
# tests or after success/failure
#   
#  PASS_FAIL_INIT_COMMAND - is run before tests run
#  PASS_COMMAND - is run after tests if they all pass
#  FAIL_COMMAND - is run after tests if there are any failrues

set -e

if [ -n "$PASS_FAIL_INIT_COMMAND" ]; then
  $PASS_FAIL_INIT_COMMAND
fi

if [ -z "$PASS_COMMAND" ]; then
  echo "Usage: set the PASS_COMMAND env variable to a command to be run upon success"
  exit 1
fi

if [ -z "$FAIL_COMMAND" ]; then
  echo "Usage: set the FAIL_COMMAND env variable to a command to be run upon failure"
  exit 1
fi

$@ && $PASS_COMMAND || $FAIL_COMMAND
